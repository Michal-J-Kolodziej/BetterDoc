# BetterDoc Change Log

## 2026-02-15 (BD-211, BD-212: resolved lifecycle + playbooks + analytics)
- Code paths changed:
  - `convex/model.ts`
  - `convex/schema.ts`
  - `convex/posts.ts`
  - `convex/comments.ts`
  - `convex/drafts.ts`
  - `convex/playbooks.ts`
  - `convex/analytics.ts`
  - `convex/_generated/api.d.ts`
  - `src/components/layout/app-sidebar-shell.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/posts.$postId.tsx`
  - `src/routes/playbooks.tsx`
  - `src/routes/analytics.tsx`
  - `src/routeTree.gen.ts`
  - `src/lib/search.ts`
  - `src/features/app-types.ts`
  - `src/features/dashboard-variants/page.tsx`
  - `src/convex/membership-guards.test.ts`
  - `src/convex/post-lifecycle.test.ts`
  - `src/convex/analytics-overview.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/change-log.md`
- Impact:
  - Expanded post lifecycle to `active/resolved/archived` and added `posts.resolvePost` (requires `resolutionSummary`) plus `posts.reopenPost`.
  - Enforced read-only behavior for non-active threads across post edits, comment writes/edits/deletes, and comment draft upserts.
  - Added team-private playbooks with `playbooks.promoteFromPost`, `playbooks.listTeamPlaybooks`, and `playbooks.getPlaybookDetail`, including manager-only promotion from resolved posts.
  - Added team-private analytics with `analytics.getTeamOverview` for `30|90` day windows, reporting resolved vs archived separately, unresolved open count, resolved-only median time-to-resolution, recurring topics, and top contributors.
  - Added new protected routes (`/playbooks`, `/analytics`) and post-detail UI actions for resolve/reopen/promote flows.

## 2026-02-15 (BD-209, BD-210: email/link invite expansion + join token flow)
- Code paths changed:
  - `convex/model.ts`
  - `convex/schema.ts`
  - `convex/inviteTokens.ts`
  - `convex/users.ts`
  - `convex/teams.ts`
  - `convex/_generated/api.d.ts`
  - `src/routes/teams.tsx`
  - `src/routes/join.$token.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/inbox.tsx`
  - `src/routes/profile.tsx`
  - `src/routeTree.gen.ts`
  - `src/convex/invite-tokens.test.ts`
  - `src/convex/team-invites.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/change-log.md`
- Impact:
  - Added invite expansion contracts: `teams.inviteByEmail`, `teams.createInviteLink`, `teams.acceptInviteToken`, `teams.revokeInviteLink`, and `teams.listTeamInviteLinks`.
  - Added new invite persistence tables (`teamEmailInvites`, `teamInviteLinks`) and optional `users.email` capture in `users.upsertMe`.
  - Added `/join/$token` protected route flow for invite-token acceptance, plus Teams UI support for IID/email/link methods, copyable join URLs, active-link listing, and revoke actions.
  - Enforced invite defaults (`14` days expiry, `25` link max uses) and link acceptance constraints (revoked/expired/max-use).
  - Stored invite tokens hash-only (`tokenHash`) and made link replay idempotent for the same user via `usedByUserIds`.
  - Kept existing IID invite flow and invite-response behavior intact.

## 2026-02-15 (BD-207, BD-208: mentions pipeline + in-app inbox)
- Code paths changed:
  - `convex/model.ts`
  - `convex/mentions.ts`
  - `convex/notifications.ts`
  - `convex/posts.ts`
  - `convex/comments.ts`
  - `convex/teams.ts`
  - `convex/_generated/api.d.ts`
  - `src/components/layout/app-sidebar-shell.tsx`
  - `src/components/mentions/mention-textarea.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/posts.$postId.tsx`
  - `src/routes/inbox.tsx`
  - `src/routes/teams.tsx`
  - `src/routes/profile.tsx`
  - `src/features/dashboard-variants/page.tsx`
  - `src/routeTree.gen.ts`
  - `src/convex/notifications.test.ts`
  - `src/convex/mentions.test.ts`
  - `src/convex/inbox-notifications.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Added mention parsing for IID tokens (`@BD-XXXXXXXX`) in post descriptions and comment bodies, with create/update support that only notifies newly added mentions.
  - Added mention recipient validation so notifications are sent only to current team members and never to the actor who authored the content.
  - Added mention notification types and dedupe keys scoped by entity+recipient to prevent duplicate mention notifications from retries/replays.
  - Added `teams.searchTeamMembers` for mention picker search and introduced a reusable mention-aware textarea component used in dashboard/post detail composers.
  - Added in-app inbox APIs (`getUnreadCount`, `listInbox` with cursor pagination, `markRead`, `markAllRead`) and idempotent read-state transitions.
  - Added protected `/inbox` UI with pagination, deep links, mark-read controls, and mark-on-open behavior; added unread badges to shell nav/header inbox entry points.

## 2026-02-15 (BD-205, BD-206: similar incidents API + composer duplicate signals)
- Code paths changed:
  - `convex/posts.ts`
  - `convex/postSimilarity.ts`
  - `convex/_generated/api.d.ts`
  - `src/routes/dashboard.tsx`
  - `src/lib/similar-incidents.ts`
  - `src/convex/post-similarity.test.ts`
  - `src/lib/similar-incidents.test.ts`
  - `src/convex/membership-guards.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Added `posts.findSimilar` with deterministic ranking, same-team membership enforcement, `excludePostId` support, and limit clamping (`default 5`, `max 10`).
  - Implemented similarity scoring as token-overlap (Jaccard-like) plus bounded recency boost, returning `score` and human-readable `reasons`.
  - Updated dashboard create-post composer with a 350ms debounced similar-incidents panel that appears only when combined input reaches 20 characters.
  - Added a non-blocking `Possible duplicate` warning when the top match score is `>= 0.65` and linked suggestions to post detail routes.
  - Added unit tests for deterministic ranking, membership enforcement, and composer threshold/warning behavior.

## 2026-02-15 (BD-203, BD-204: team templates + post/comment draft autosave)
- Code paths changed:
  - `convex/templates.ts`
  - `convex/drafts.ts`
  - `convex/model.ts`
  - `convex/_generated/api.d.ts`
  - `src/routes/dashboard.tsx`
  - `src/routes/posts.$postId.tsx`
  - `src/convex/drafts.test.ts`
  - `src/convex/membership-guards.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Added team template APIs (`list/create/update/delete`) with team-membership enforcement so all team members can manage shared post templates.
  - Added post and comment draft APIs (`upsert/get/delete`) with per-user scoping and default retention expiry behavior.
  - Updated dashboard create-post dialog to apply templates, save/update/delete templates, autosave drafts every 1.5 seconds, restore drafts on reopen, and discard drafts on demand.
  - Updated post detail discussion composer to autosave/restore/discard comment drafts and clear drafts after successful comment submit.
  - Added tests covering membership guard usage and draft autosave lifecycle behavior, including cross-user draft isolation.

## 2026-02-14 (BD-201, BD-202: notification foundation + draft/template schema)
- Code paths changed:
  - `convex/schema.ts`
  - `convex/model.ts`
  - `convex/notifications.ts`
  - `convex/teams.ts`
  - `convex/comments.ts`
  - `convex/_generated/api.d.ts`
  - `src/convex/notifications.test.ts`
  - `src/convex/draft-retention.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Added Convex schema foundations for `postTemplates`, `postDrafts`, `commentDrafts`, and `notifications` with team/user/time-oriented indexes and a dedupe-key index for idempotent enqueue.
  - Added notification service primitives (`notifications.enqueue`, `notifications.enqueueMany`) with dedupe-by-key semantics and deterministic dedupe-key builders for initial event wiring.
  - Hooked notifications into `teams.inviteByIID` (`invite_received`) and `comments.createComment` (`comment_on_post` when commenter is not the post creator) without changing existing team/post/comment authorization or mutation contracts.
  - Added tests covering notification dedupe behavior (`enqueue` + `enqueueMany`) and default draft retention fallback behavior (`resolveDraftExpiresAt`).

## 2026-02-14 (V1 tape-feed redesign rollout across app)
- Code paths changed:
  - `src/styles.css`
  - `src/components/layout/app-sidebar-shell.tsx`
  - `src/components/ui/button.tsx`
  - `src/components/ui/card.tsx`
  - `src/components/ui/input.tsx`
  - `src/components/ui/textarea.tsx`
  - `src/components/ui/select.tsx`
  - `src/components/ui/dialog.tsx`
  - `src/components/ui/dropdown-menu.tsx`
  - `src/components/ui/badge.tsx`
  - `src/routes/index.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/posts.$postId.tsx`
  - `src/routes/teams.tsx`
  - `src/routes/profile.tsx`
  - `src/routeTree.gen.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Rolled the app from glow/panel-heavy styling to the dashboard V1-inspired tape-feed language: flatter surfaces, separator-driven layout, and reduced border/chrome density.
  - Updated all major user-facing routes (home, dashboard, post detail, teams, profile) to use compact section blocks and list rows instead of stacked card windows.
  - Restyled shared UI primitives so buttons, form controls, menus, dialog, and badges keep the same behavior but render with low-glow, desktop-focused visual consistency.

## 2026-02-14 (Dashboard redesign review variants: v1-v5)
- Code paths changed:
  - `src/features/dashboard-variants/page.tsx`
  - `src/routes/dashboard_.v1.tsx`
  - `src/routes/dashboard_.v2.tsx`
  - `src/routes/dashboard_.v3.tsx`
  - `src/routes/dashboard_.v4.tsx`
  - `src/routes/dashboard_.v5.tsx`
  - `src/routeTree.gen.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Added five desktop dashboard redesign previews at `/dashboard/v1`, `/dashboard/v2`, `/dashboard/v3`, `/dashboard/v4`, and `/dashboard/v5` for side-by-side style review.
  - Each variant reuses live dashboard post data while reducing visual chrome (fewer framed panels and lighter separator-first structure).
  - Variant previews avoid glow-heavy call-to-action styling and keep existing post-detail navigation behavior intact.
  - Replaced a dynamic variant route with static non-nested variant routes to stop a TanStack route-tree generation loop that was causing continuous reloads in dev on dashboard paths.

## 2026-02-14 (Desktop shell pass: persistent left sidebar + non-responsive layout)
- Code paths changed:
  - `src/components/layout/app-sidebar-shell.tsx`
  - `src/styles.css`
  - `src/routes/index.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/posts.$postId.tsx`
  - `src/routes/teams.tsx`
  - `src/routes/profile.tsx`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Replaced protected-route per-page headers with a shared desktop shell containing a persistent left sidebar navigation (`Dashboard`, `Teams`, `Profile`, `Logout`) and account footer block.
  - Removed responsive route/layout variants and switched the app to a hard desktop column model with fixed sidebar/content regions.
  - Kept all existing auth, Convex query/mutation, permissions, and route behavior unchanged while changing only UI structure/styling.

## 2026-02-14 (Noir Grid redesign: dark minimal UI pass)
- Code paths changed:
  - `src/styles.css`
  - `src/components/ui/avatar.tsx`
  - `src/components/ui/badge.tsx`
  - `src/components/ui/button.tsx`
  - `src/components/ui/card.tsx`
  - `src/components/ui/command.tsx`
  - `src/components/ui/dialog.tsx`
  - `src/components/ui/dropdown-menu.tsx`
  - `src/components/ui/input.tsx`
  - `src/components/ui/label.tsx`
  - `src/components/ui/scroll-area.tsx`
  - `src/components/ui/select.tsx`
  - `src/components/ui/separator.tsx`
  - `src/components/ui/sheet.tsx`
  - `src/components/ui/skeleton.tsx`
  - `src/components/ui/textarea.tsx`
  - `src/routes/__root.tsx`
  - `src/routes/index.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/posts.$postId.tsx`
  - `src/routes/teams.tsx`
  - `src/routes/profile.tsx`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Replaced the previous dark styling with a Noir Grid visual system: charcoal surfaces, cyan/lime accent treatment, compact spacing, layered background texture, and reduced-motion-safe reveal timing.
  - Restyled all shared Shadcn primitives to use the same surface, border, focus, and motion language without changing component APIs.
  - Updated route shells for landing, dashboard, post detail, teams, and profile with cleaner hierarchy and minor UX polish (inline dashboard team selector and account dropdown).

## 2026-02-14 (V2 ground-up redesign: posts + teams + comments)
- Code paths changed:
  - `convex/schema.ts`
  - `convex/model.ts`
  - `convex/auth.ts`
  - `convex/users.ts`
  - `convex/teams.ts`
  - `convex/posts.ts`
  - `convex/comments.ts`
  - `convex/files.ts`
  - `convex/http.ts`
  - `src/routes/__root.tsx`
  - `src/routes/index.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/posts.$postId.tsx`
  - `src/routes/teams.tsx`
  - `src/routes/profile.tsx`
  - `src/styles.css`
  - `src/components/ui/*` (Shadcn component set)
  - `src/lib/search.ts`
  - `src/lib/uploads.ts`
  - `src/lib/use-debounced-value.ts`
  - `src/features/app-types.ts`
  - `package.json`
- Code paths removed:
  - `.azure-pipelines/*`
  - `convex/accessControl.ts`
  - `convex/rbac.ts`
  - `convex/scanIngestion*.ts`
  - `convex/tipDraft.ts`
  - `src/routes/explorer*`
  - `src/features/explorer/*`
  - `src/features/dashboard/*` (legacy tabbed tips dashboard)
  - `scripts/angular-scanner.ts`
  - `scripts/manual-sync-azure-repo.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Replaced the previous tips/explorer/scanner product with BetterDoc V2: team-scoped posts, comments, image attachments, profile IID, team invites/role management, post archive/unarchive, and dashboard search filters.
  - Migrated UI primitives to Shadcn + Tailwind and removed legacy custom shell component system.
  - Removed Azure and Angular scanner operational/deployment surface from active codebase.

## 2026-02-13 (Tailwind UX redesign + tabbed dashboard shell)
- Code paths changed:
  - `package.json`
  - `vite.config.ts`
  - `src/styles.css`
  - `src/styles/tokens.css`
  - `src/styles/base.css`
  - `src/styles/components.css`
  - `src/styles/motion.css`
  - `src/lib/classnames.ts`
  - `src/components/ui/AppShell.tsx`
  - `src/components/ui/SidebarRail.tsx`
  - `src/components/ui/PageTopbar.tsx`
  - `src/components/ui/Tabs.tsx`
  - `src/components/ui/Panel.tsx`
  - `src/components/ui/StatusChip.tsx`
  - `src/components/ui/MetricStrip.tsx`
  - `src/components/ui/EntityList.tsx`
  - `src/features/explorer/ExplorerLayout.tsx`
  - `src/features/dashboard/DashboardTabs.tsx`
  - `src/features/dashboard/types.ts`
  - `src/features/dashboard/panels/OverviewPanel.tsx`
  - `src/features/dashboard/panels/TipStudioPanel.tsx`
  - `src/features/dashboard/panels/WorkflowPanel.tsx`
  - `src/features/dashboard/panels/SearchPanel.tsx`
  - `src/features/dashboard/panels/WatchlistPanel.tsx`
  - `src/features/dashboard/panels/AuditPanel.tsx`
  - `src/routes/index.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/explorer.tsx`
  - `src/routes/explorer.$workspaceId.tsx`
  - `src/routes/explorer.$workspaceId.project.$projectName.tsx`
  - `src/routes/explorer.$workspaceId.lib.$libraryName.tsx`
  - `src/routes/explorer.$workspaceId.component.$componentId.tsx`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Migrated the app UI to Tailwind v4 with Vite plugin integration and layered token/base/component/motion style modules.
  - Replaced border-heavy route markup with reusable shell primitives and feature panels across home, dashboard, and explorer route families.
  - Added URL-synced dashboard tabs (`tab`) with normalization to `overview` for missing/invalid values while preserving existing auth, RBAC, Convex query/mutation behavior.
  - Updated explorer route head metadata so smoke checks still detect expected shell text (`Component Explorer`).

## 2026-02-13 (Dark surface pass: removed white backgrounds)
- Code paths changed:
  - `src/styles.css`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Reworked global desktop styling tokens and component surface styles to remove white/light panel backgrounds in favor of dark green/graphite surfaces.
  - Updated shells, cards, form controls, links, and action chips so the app now follows a fully dark visual baseline aligned with stitch-inspired references.

## 2026-02-13 (Structure refactor for stitch-style desktop shells)
- Code paths changed:
  - `src/routes/dashboard.tsx`
  - `src/routes/index.tsx`
  - `src/routes/explorer.tsx`
  - `src/routes/explorer.$workspaceId.tsx`
  - `src/routes/explorer.$workspaceId.project.$projectName.tsx`
  - `src/routes/explorer.$workspaceId.lib.$libraryName.tsx`
  - `src/routes/explorer.$workspaceId.component.$componentId.tsx`
  - `src/styles.css`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Refactored UI markup from mostly single-column `<main>/<section>/<p>` stacks into shell-based desktop structures that more closely match stitch references: sidebar navigation, top headers, content panes, and card-list rows.
  - Added reusable class-driven shell styling for dashboard and explorer route families while preserving all existing query/mutation/auth/RBAC behaviors.
  - Updated landing/home route structure to match the same desktop visual language and action hierarchy.

## 2026-02-13 (Desktop UI styling refresh)
- Code paths changed:
  - `src/styles.css`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Replaced the baseline global stylesheet with a desktop-focused design system based on stitch mock references, including layered background treatment, glass-card layout, expressive typography, and motion polish.
  - Unified visual treatment for all shared primitives (`main`, `section`, labels, links, code chips, inputs/selects/textareas, buttons, checkbox/radio states, validation messages) so dashboard, explorer, and landing routes inherit consistent styling without behavior changes.

## 2026-02-13 (Explorer workspace route param fix)
- Code paths changed:
  - `src/lib/workspace-route.ts`
  - `src/routes/explorer.tsx`
  - `src/routes/explorer.$workspaceId.tsx`
  - `src/routes/explorer.$workspaceId.project.$projectName.tsx`
  - `src/routes/explorer.$workspaceId.lib.$libraryName.tsx`
  - `src/routes/explorer.$workspaceId.component.$componentId.tsx`
  - `src/routes/dashboard.tsx`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Fixed explorer navigation by rendering child routes from `src/routes/explorer.tsx` via `<Outlet />`, which was previously missing and prevented child pages from appearing after link clicks.
  - Fixed nested workspace child navigation (`Open project view`, library/component routes) by rendering child routes from `src/routes/explorer.$workspaceId.tsx` via `<Outlet />`.
  - Added slash-safe workspace route token encoding/decoding (`src/lib/workspace-route.ts`) so workspace IDs containing `/` route correctly in explorer links and Convex queries.
  - Marked `/dashboard` as client-rendered (`ssr: false`) to prevent server-side Convex hook execution outside `ConvexProvider`.

## 2026-02-13 (BD-014 follow-up: pipeline-free sync option)
- Code paths changed:
  - `scripts/manual-sync-azure-repo.ts`
  - `package.json`
  - `.env.example`
- Documentation updated:
  - `docs/operations.md`
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Added a manual Azure-repo sync command (`bun run sync:azure-repo`) that clones a repo, runs the Angular scanner, and posts payloads to Convex ingestion without requiring Azure Pipeline setup.
  - Improved manual sync operability by auto-detecting a single nested Angular workspace, requiring explicit `--workspace-subpath` only when multiple workspaces exist, and normalizing Convex ingest URLs from `.convex.cloud` to `.convex.site`.

## 2026-02-13 (BD-015, BD-016, BD-017)
- Code paths changed:
  - `.azure-pipelines/vercel-deploy.yml`
  - `scripts/ci/vercel-deploy.sh`
  - `scripts/ci/run-smoke-tests.mjs`
  - `package.json`
  - `convex/schema.ts`
  - `convex/accessControl.ts`
  - `src/routes/explorer.$workspaceId.component.$componentId.tsx`
  - `src/routes/dashboard.tsx`
- Documentation updated:
  - `docs/operations.md`
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/launch-runbook.md`
  - `docs/backup-restore-validation.md`
  - `docs/change-log.md`
- Impact:
  - Added a gated Azure-to-Vercel deployment pipeline for preview/staging/prod with smoke-test enforcement and manual production promotion control.
  - Added component watchlist subscriptions and in-app notification logging/delivery state for component-linked tip publish/update events, plus dashboard and component-page UX for subscribe/read workflows.
  - Added launch hardening artifacts: production runbook, rollback procedure, smoke-check command path, and Convex backup/restore validation drill documentation.

## 2026-02-12 (BD-014)
- Code paths changed:
  - `.azure-pipelines/incremental-scan.yml`
  - `.azure-pipelines/nightly-full-scan.yml`
  - `scripts/ci/post-scan-ingestion.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Added Azure DevOps YAML definitions for PR/merge incremental scan ingestion and nightly full scan ingestion, wired to `POST /scanner/ingest` through a reusable CI script with configurable timeout/retry backoff and secret-backed endpoint/token references.

## 2026-02-12 (BD-012, BD-013)
- Code paths changed:
  - `convex/schema.ts`
  - `convex/accessControl.ts`
  - `src/routes/explorer.tsx`
  - `src/routes/explorer.$workspaceId.tsx`
  - `src/routes/explorer.$workspaceId.project.$projectName.tsx`
  - `src/routes/explorer.$workspaceId.lib.$libraryName.tsx`
  - `src/routes/explorer.$workspaceId.component.$componentId.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/index.tsx`
  - `src/routeTree.gen.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/change-log.md`
- Impact:
  - Delivered component explorer navigation for workspace/project/library/component views with dependency graph visibility, added many-to-many tip-to-component linking in the dashboard editor, and exposed related published tips on component detail pages via new Convex explorer/linking queries.
  - Marked explorer routes as client-rendered (`ssr: false`) to keep Convex query hooks inside the client provider tree.

## 2026-02-12 (BD-011)
- Code paths changed:
  - `convex/schema.ts`
  - `convex/scanIngestion.ts`
  - `convex/scanIngestionInternal.ts`
  - `convex/http.ts`
  - `src/lib/scan-ingestion.ts`
  - `src/lib/scan-ingestion.test.ts`
  - `convex/_generated/api.d.ts`
- Documentation updated:
  - `docs/scanner-ingestion-api.md`
  - `docs/codebase-reference.md`
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Added idempotent/retry-safe scanner snapshot ingestion with `scanRuns` + versioned component graph persistence and a dedicated HTTP contract (`POST /scanner/ingest`) for pipeline integrations.

## 2026-02-12 (BD-010)
- Code paths changed:
  - `package.json`
  - `scripts/angular-scanner.ts`
  - `src/lib/angular-scanner.ts`
  - `src/lib/angular-scanner.test.ts`
- Documentation updated:
  - `docs/angular-scanner-cli.md`
  - `docs/codebase-reference.md`
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Added Angular scanner CLI support for deterministic JSON snapshots of workspace projects/libraries/components/internal dependencies with clear structured error reporting and automated test coverage.

## 2026-02-12 (BD-008, BD-009)
- Code paths changed:
  - `convex/schema.ts`
  - `convex/accessControl.ts`
  - `convex/tipDraft.ts`
  - `src/routes/dashboard.tsx`
  - `src/lib/tip-editor.ts`
  - `src/lib/tip-editor.test.ts`
  - `src/lib/tip-draft.server.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/change-log.md`
- Impact:
  - Added validated tip lifecycle transitions (`draft`, `in_review`, `published`, `deprecated`) with reviewer-gated publish/deprecate actions, introduced indexed multi-filter tip search (text/project/library/component/tag/status), and updated dashboard UX for workflow, filtering, and empty/error/permission handling.

## 2026-02-12 (BD-006, BD-007)
- Code paths changed:
  - `convex/schema.ts`
  - `convex/accessControl.ts`
  - `convex/tipDraft.ts`
  - `convex/_generated/api.d.ts`
  - `src/routes/dashboard.tsx`
  - `src/lib/tip-editor.ts`
  - `src/lib/tip-editor.test.ts`
  - `src/lib/tip-draft.server.test.ts`
  - `src/styles.css`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/change-log.md`
- Impact:
  - Delivered structured tips + revision persistence with server/client validation, added a draft editor UI for symptom/root-cause/fix/prevention/tags/references, and wired draft saves to immutable `tipRevisions` history.

## 2026-02-12 (BD-004, BD-005)
- Code paths changed:
  - `convex/schema.ts`
  - `convex/rbac.ts`
  - `convex/accessControl.ts`
  - `convex/_generated/api.d.ts`
  - `src/routes/__root.tsx`
  - `src/routes/dashboard.tsx`
  - `src/lib/rbac.ts`
  - `src/lib/rbac.test.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/change-log.md`
- Impact:
  - Added Reader/Contributor/Reviewer/Admin RBAC model, enforced role checks in Convex queries/mutations and dashboard UI guards, and introduced immutable audit events for publish/deprecate/role/integration privileged actions.

## 2026-02-12 (BD-003 follow-up)
- Code paths changed:
  - `src/start.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Fixed client runtime crash caused by eager server env validation import path; auth middleware now reads redirect override from public `VITE_WORKOS_REDIRECT_URI`.

## 2026-02-12 (BD-003 callback port hardening)
- Code paths changed:
  - `vite.config.ts`
- Documentation updated:
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Locked Vite dev server to port `3000` with strict port behavior so WorkOS callback URI remains stable during local sign-in flow.

## 2026-02-11
- Code paths changed:
  - `package.json`
  - `bun.lock`
  - `vite.config.ts`
  - `vitest.config.ts`
  - `eslint.config.js`
  - `tsconfig.json`
  - `.env.example`
  - `.gitignore`
  - `src/router.tsx`
  - `src/routes/__root.tsx`
  - `src/routes/index.tsx`
  - `src/config/env.shared.ts`
  - `src/config/env.client.ts`
  - `src/config/env.server.ts`
  - `src/config/platform.ts`
  - `src/config/workos.server.ts`
  - `src/config/env.shared.test.ts`
  - `src/lib/convex-client.tsx`
  - `src/styles.css`
  - `scripts/validate-env.ts`
  - `convex/schema.ts`
  - `convex/health.ts`
  - `convex/_generated/api.ts`
  - `convex/_generated/server.ts`
  - `convex/_generated/dataModel.ts`
  - `convex.json`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Delivered BD-001 and BD-002 foundation: TanStack Start scaffold, Convex client wiring, validated `dev/staging/prod` env strategy, and operational scripts for lint/typecheck/test/build.

## 2026-02-11 (BD-003)
- Code paths changed:
  - `package.json`
  - `bun.lock`
  - `.env.example`
  - `src/start.ts`
  - `src/routes/login.tsx`
  - `src/routes/logout.tsx`
  - `src/routes/dashboard.tsx`
  - `src/routes/api/auth/callback.tsx`
  - `src/routes/index.tsx`
  - `src/routeTree.gen.ts`
  - `src/config/env.shared.ts`
  - `src/config/env.server.ts`
  - `src/config/workos.server.ts`
  - `src/config/env.shared.test.ts`
  - `scripts/validate-env.ts`
- Documentation updated:
  - `docs/codebase-reference.md`
  - `docs/security-and-access.md`
  - `docs/operations.md`
  - `docs/change-log.md`
- Impact:
  - Delivered WorkOS SSO login/logout/callback flow with middleware-backed sessions, protected dashboard access checks, and secure cookie environment controls.
